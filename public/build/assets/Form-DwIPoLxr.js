import{x as z,k as B,e as F,o as n,w as a,a as o,b as i,u as e,d,t as u,i as A,c,f as g,n as b,l as N,F as x,h,W as S}from"./app-CLRGzXJh.js";import{_ as y}from"./useTheme-BU6_s4Cb.js";import{_ as T}from"./Card-DLF2tHMY.js";import{_ as G,a as U}from"./CardTitle-8Ur3Jmup.js";import{_ as D}from"./CardContent-BXttVh16.js";import{_ as W}from"./CardFooter-DyCHBkX7.js";import{_ as f,a as j}from"./Label-DGKRmvPX.js";import{_ as J}from"./Switch-BeWgy_d3.js";import{_ as K}from"./Textarea-BWxcBPGO.js";const q={class:"space-y-2"},L={key:0,class:"text-sm text-destructive"},O={class:"space-y-2"},H={key:0,class:"text-sm text-destructive"},Q={class:"space-y-4"},R={class:"flex gap-2"},X={key:0,class:"flex flex-wrap gap-2"},Y=["onClick"],Z={key:1,class:"text-sm text-destructive"},ee={class:"space-y-4"},te={key:0,class:"space-y-2"},se={class:"grid grid-cols-2 md:grid-cols-3 gap-4"},oe={class:"aspect-video bg-muted rounded-lg flex items-center justify-center text-sm text-muted-foreground border-2 border-dashed"},ie={class:"text-center p-2"},re={class:"font-medium truncate"},le={class:"text-xs"},ae={key:1,class:"space-y-2"},ne={class:"grid grid-cols-2 md:grid-cols-3 gap-4"},de=["src","alt"],ce={class:"absolute inset-0 bg-black/50 opacity-0 group-hover:opacity-100 transition-opacity rounded-lg flex items-center justify-center"},ue={class:"flex gap-2"},me={key:2,class:"text-sm text-destructive"},pe={class:"space-y-4"},ge={class:"flex items-center justify-between space-x-2"},_e={class:"space-y-0.5"},fe={key:0,class:"text-sm text-destructive"},Ce={__name:"Form",props:{mode:{type:String,required:!0,validator:m=>["create","edit"].includes(m)},project:{type:Object,default:()=>({title:"",description:"",technologies:[],is_visible:!0,images:[]})}},setup(m){const p=m,t=z({title:p.project.title,description:p.project.description,technologies:p.project.technologies||[],is_visible:!!p.project.is_visible,images:[]}),v=B(""),k=()=>{v.value.trim()&&!t.technologies.includes(v.value.trim())&&(t.technologies.push(v.value.trim()),v.value="")},C=r=>{t.technologies.splice(r,1)},$=r=>{const s=Array.from(r.target.files);console.log("Selected files:",s),t.images=s},I=r=>{const s=Array.from(t.images);s.splice(r,1),t.images=s},w=r=>{p.mode==="edit"&&S.put(route("admin.projects.setMainImage",[p.project.id,r]),{},{preserveState:!0,onSuccess:()=>{console.log("Main image updated")}})},P=r=>{p.mode==="edit"&&confirm("Are you sure you want to delete this image?")&&S.delete(route("admin.projects.deleteImage",[p.project.id,r]),{preserveState:!0,onSuccess:()=>{console.log("Image deleted")}})},M=()=>{console.log("Submitting form with data:",{title:t.title,description:t.description,technologies:t.technologies,is_visible:t.is_visible,images:t.images,imageCount:t.images.length}),t.images.length>0&&t.images.forEach((r,s)=>{console.log(`Image ${s+1}:`,{name:r.name,size:r.size,type:r.type})}),p.mode==="create"?t.post(route("admin.projects.store"),{onSuccess:()=>{console.log("Project created successfully")},onError:r=>{console.error("Form submission errors:",r)}}):t.patch(route("admin.projects.update",p.project.id),{onSuccess:()=>{console.log("Project updated successfully")},onError:r=>{console.error("Form submission errors:",r)}})};return(r,s)=>(n(),F(e(T),null,{default:a(()=>[o(e(G),null,{default:a(()=>[o(e(U),null,{default:a(()=>[d(u(m.mode==="create"?"Add New Project":"Edit Project"),1)]),_:1})]),_:1}),i("form",{onSubmit:A(M,["prevent"])},[o(e(D),{class:"space-y-6"},{default:a(()=>{var V;return[i("div",q,[o(e(f),{for:"title"},{default:a(()=>s[4]||(s[4]=[d("Title")])),_:1,__:[4]}),o(e(j),{id:"title",modelValue:e(t).title,"onUpdate:modelValue":s[0]||(s[0]=l=>e(t).title=l),type:"text",placeholder:"Enter project title",class:b({"border-destructive ring-destructive":e(t).errors.title})},null,8,["modelValue","class"]),e(t).errors.title?(n(),c("p",L,u(e(t).errors.title),1)):g("",!0)]),i("div",O,[o(e(f),{for:"description"},{default:a(()=>s[5]||(s[5]=[d("Description")])),_:1,__:[5]}),o(e(K),{id:"description",modelValue:e(t).description,"onUpdate:modelValue":s[1]||(s[1]=l=>e(t).description=l),placeholder:"Enter project description",rows:"4",class:b({"border-destructive ring-destructive":e(t).errors.description})},null,8,["modelValue","class"]),e(t).errors.description?(n(),c("p",H,u(e(t).errors.description),1)):g("",!0)]),i("div",Q,[o(e(f),null,{default:a(()=>s[6]||(s[6]=[d("Technologies")])),_:1,__:[6]}),i("div",R,[o(e(j),{modelValue:v.value,"onUpdate:modelValue":s[2]||(s[2]=l=>v.value=l),type:"text",placeholder:"Add a technology",onKeyup:N(k,["enter"]),class:"flex-1"},null,8,["modelValue"]),o(e(y),{type:"button",variant:"outline",onClick:k},{default:a(()=>s[7]||(s[7]=[d(" Add ")])),_:1,__:[7]})]),e(t).technologies.length>0?(n(),c("div",X,[(n(!0),c(x,null,h(e(t).technologies,(l,_)=>(n(),c("span",{key:_,class:"inline-flex items-center gap-1 rounded-full bg-primary/10 px-3 py-1 text-sm text-primary"},[d(u(l)+" ",1),i("button",{type:"button",onClick:E=>C(_),class:"ml-1 hover:text-destructive"}," × ",8,Y)]))),128))])):g("",!0),e(t).errors.technologies?(n(),c("p",Z,u(e(t).errors.technologies),1)):g("",!0)]),i("div",ee,[o(e(f),{for:"images"},{default:a(()=>s[8]||(s[8]=[d("Project Images")])),_:1,__:[8]}),o(e(j),{id:"images",type:"file",multiple:"",accept:"image/*",onChange:$,class:b({"border-destructive ring-destructive":e(t).errors.images})},null,8,["class"]),s[12]||(s[12]=i("p",{class:"text-sm text-muted-foreground"}," Select multiple images for your project. Supported formats: JPEG, PNG, JPG, GIF, SVG, WebP (max 2MB each) ",-1)),e(t).images.length>0?(n(),c("div",te,[o(e(f),null,{default:a(()=>[d("Selected Images ("+u(e(t).images.length)+")",1)]),_:1}),i("div",se,[(n(!0),c(x,null,h(e(t).images,(l,_)=>(n(),c("div",{key:_,class:"relative group"},[i("div",oe,[i("div",ie,[i("div",re,u(l.name),1),i("div",le,u((l.size/1024/1024).toFixed(2))+"MB",1)])]),o(e(y),{type:"button",variant:"destructive",size:"sm",class:"absolute top-2 right-2 opacity-0 group-hover:opacity-100 transition-opacity",onClick:E=>I(_)},{default:a(()=>s[9]||(s[9]=[d(" × ")])),_:2,__:[9]},1032,["onClick"])]))),128))])])):g("",!0),m.mode==="edit"&&((V=m.project.images)==null?void 0:V.length)>0?(n(),c("div",ae,[o(e(f),null,{default:a(()=>s[10]||(s[10]=[d("Current Images")])),_:1,__:[10]}),i("div",ne,[(n(!0),c(x,null,h(m.project.images,l=>(n(),c("div",{key:l.id,class:"relative group"},[i("img",{src:l.url,alt:m.project.title,class:"aspect-video object-cover rounded-lg border"},null,8,de),i("div",ce,[i("div",ue,[o(e(y),{type:"button",variant:"secondary",size:"sm",onClick:_=>w(l.id)},{default:a(()=>[d(u(m.project.main_image_id===l.id?"Main":"Set Main"),1)]),_:2},1032,["onClick"]),o(e(y),{type:"button",variant:"destructive",size:"sm",onClick:_=>P(l.id)},{default:a(()=>s[11]||(s[11]=[d(" Delete ")])),_:2,__:[11]},1032,["onClick"])])])]))),128))])])):g("",!0),e(t).errors.images?(n(),c("p",me,u(e(t).errors.images),1)):g("",!0)]),i("div",pe,[i("div",ge,[i("div",_e,[o(e(f),{for:"is_visible"},{default:a(()=>s[13]||(s[13]=[d("Visibility")])),_:1,__:[13]}),s[14]||(s[14]=i("p",{class:"text-sm text-muted-foreground"}," Make this project visible on your portfolio ",-1))]),o(e(J),{id:"is_visible",modelValue:e(t).is_visible,"onUpdate:modelValue":s[3]||(s[3]=l=>e(t).is_visible=l),class:b({"ring-destructive":e(t).errors.is_visible})},null,8,["modelValue","class"])]),e(t).errors.is_visible?(n(),c("p",fe,u(e(t).errors.is_visible),1)):g("",!0)])]}),_:1}),o(e(W),{class:"flex justify-end space-x-2"},{default:a(()=>[o(e(y),{type:"submit",disabled:e(t).processing},{default:a(()=>[d(u(m.mode==="create"?"Create Project":"Update Project"),1)]),_:1},8,["disabled"])]),_:1})],32)]),_:1}))}};export{Ce as default};
